#!/usr/bin/env python3

from datetime import datetime

with open('/tmp/obsidian.state', 'r') as reader:
    line = reader.readline().strip()
    t1 = datetime.strptime(line, "%Y-%m-%dT%H:%M")
    t2 = datetime.now()
    timedelta = t2 - t1
    tot_seconds = timedelta.total_seconds()
    hours, rem = divmod(tot_seconds, 60*60)
    mins, sec = divmod(rem, 60)
    hours = int(hours)
    mins = int(mins)
    sec = int(sec)
    print(f"{hours}h{mins}m")

# datediff -i "%Y-%m-%dT%H:%M" $(cat /tmp/obsidian.state) $(date +"%Y-%m-%dT%H:%M") -f "%H:%M"
